ClientEventNames = {
    onClientBrowserCreated = 'onClientBrowserCreated',
    onClientBrowserCursorChange = 'onClientBrowserCursorChange',
    onClientBrowserDocumentReady = 'onClientBrowserDocumentReady',
    onClientBrowserInputFocusChanged = 'onClientBrowserInputFocusChanged',
    onClientBrowserLoadingFailed = 'onClientBrowserLoadingFailed',
    onClientBrowserLoadingStart = 'onClientBrowserLoadingStart',
    onClientBrowserNavigate = 'onClientBrowserNavigate',
    onClientBrowserPopup = 'onClientBrowserPopup',
    onClientBrowserResourceBlocked = 'onClientBrowserResourceBlocked',
    onClientBrowserTooltip = 'onClientBrowserTooltip',
    onClientBrowserWhitelistChange = 'onClientBrowserWhitelistChange',
    onClientColShapeHit = 'onClientColShapeHit',
    onClientColShapeLeave = 'onClientColShapeLeave',
    onClientElementColShapeHit = 'onClientElementColShapeHit',
    onClientElementColShapeLeave = 'onClientElementColShapeLeave',
    onClientElementDataChange = 'onClientElementDataChange',
    onClientElementCollectionChange = 'onClientElementDataChange',
    onClientElementDestroy = 'onClientElementDestroy',
    onClientElementDimensionChange = 'onClientElementDimensionChange',
    onClientElementInteriorChange = 'onClientElementInteriorChange',
    onClientElementModelChange = 'onClientElementModelChange',
    onClientElementStreamIn = 'onClientElementStreamIn',
    onClientElementStreamOut = 'onClientElementStreamOut',
    onClientCharacter = 'onClientCharacter',
    onClientClick = 'onClientClick',
    onClientCursorMove = 'onClientCursorMove',
    onClientDoubleClick = 'onClientDoubleClick',
    onClientGUIAccepted = 'onClientGUIAccepted',
    onClientGUIBlur = 'onClientGUIBlur',
    onClientGUIChanged = 'onClientGUIChanged',
    onClientGUIClick = 'onClientGUIClick',
    onClientGUIComboBoxAccepted = 'onClientGUIComboBoxAccepted',
    onClientGUIDoubleClick = 'onClientGUIDoubleClick',
    onClientGUIFocus = 'onClientGUIFocus',
    onClientGUIMouseDown = 'onClientGUIMouseDown',
    onClientGUIMouseUp = 'onClientGUIMouseUp',
    onClientGUIMove = 'onClientGUIMove',
    onClientGUIScroll = 'onClientGUIScroll',
    onClientGUISize = 'onClientGUISize',
    onClientGUITabSwitched = 'onClientGUITabSwitched',
    onClientKey = 'onClientKey',
    onClientMouseEnter = 'onClientMouseEnter',
    onClientMouseLeave = 'onClientMouseLeave',
    onClientMouseMove = 'onClientMouseMove',
    onClientMouseWheel = 'onClientMouseWheel',
    onClientPaste = 'onClientPaste',
    onClientMarkerHit = 'onClientMarkerHit',
    onClientMarkerLeave = 'onClientMarkerLeave',
    onClientObjectBreak = 'onClientObjectBreak',
    onClientObjectDamage = 'onClientObjectDamage',
    onClientObjectMoveStart = 'onClientObjectMoveStart',
    onClientObjectMoveStop = 'onClientObjectMoveStop',
    onClientChatMessage = 'onClientChatMessage',
    onClientConsole = 'onClientConsole',
    onClientDebugMessage = 'onClientDebugMessage',
    onClientExplosion = 'onClientExplosion',
    onClientFileDownloadComplete = 'onClientFileDownloadComplete',
    onClientHUDRender = 'onClientHUDRender',
    onClientMinimize = 'onClientMinimize',
    onClientMTAFocusChange = 'onClientMTAFocusChange',
    onClientPedsProcessed = 'onClientPedsProcessed',
    onClientPlayerNetworkStatus = 'onClientPlayerNetworkStatus',
    onClientPreRender = 'onClientPreRender',
    onClientRender = 'onClientRender',
    onClientRestore = 'onClientRestore',
    onClientTransferBoxProgressChange = 'onClientTransferBoxProgressChange',
    onClientTransferBoxVisibilityChange = 'onClientTransferBoxVisibilityChange',
    onClientWorldSound = 'onClientWorldSound',
    onClientPedDamage = 'onClientPedDamage',
    onClientPedHeliKilled = 'onClientPedHeliKilled',
    onClientPedHitByWaterCannon = 'onClientPedHitByWaterCannon',
    onClientPedStep = 'onClientPedStep',
    onClientPedVehicleEnter = 'onClientPedVehicleEnter',
    onClientPedVehicleExit = 'onClientPedVehicleExit',
    onClientPedWasted = 'onClientPedWasted',
    onClientPedWeaponFire = 'onClientPedWeaponFire',
    onClientPickupHit = 'onClientPickupHit',
    onClientPickupLeave = 'onClientPickupLeave',
    onClientPlayerChangeNick = 'onClientPlayerChangeNick',
    onClientPlayerChoke = 'onClientPlayerChoke',
    onClientPlayerDamage = 'onClientPlayerDamage',
    onClientPlayerHeliKilled = 'onClientPlayerHeliKilled',
    onClientPlayerHitByWaterCannon = 'onClientPlayerHitByWaterCannon',
    onClientPlayerJoin = 'onClientPlayerJoin',
    onClientPlayerPickupHit = 'onClientPlayerPickupHit',
    onClientPlayerPickupLeave = 'onClientPlayerPickupLeave',
    onClientPlayerQuit = 'onClientPlayerQuit',
    onClientPlayerRadioSwitch = 'onClientPlayerRadioSwitch',
    onClientPlayerSpawn = 'onClientPlayerSpawn',
    onClientPlayerStealthKill = 'onClientPlayerStealthKill',
    onClientPlayerStuntFinish = 'onClientPlayerStuntFinish',
    onClientPlayerStuntStart = 'onClientPlayerStuntStart',
    onClientPlayerTarget = 'onClientPlayerTarget',
    onClientPlayerVehicleEnter = 'onClientPlayerVehicleEnter',
    onClientPlayerVehicleExit = 'onClientPlayerVehicleExit',
    onClientPlayerVoicePause = 'onClientPlayerVoicePause',
    onClientPlayerVoiceResumed = 'onClientPlayerVoiceResumed',
    onClientPlayerVoiceStart = 'onClientPlayerVoiceStart',
    onClientPlayerVoiceStop = 'onClientPlayerVoiceStop',
    onClientPlayerWasted = 'onClientPlayerWasted',
    onClientPlayerWeaponFire = 'onClientPlayerWeaponFire',
    onClientPlayerWeaponSwitch = 'onClientPlayerWeaponSwitch',
    onClientProjectileCreation = 'onClientProjectileCreation',
    onClientResourceFileDownload = 'onClientResourceFileDownload',
    onClientResourceStart = 'onClientResourceStart',
    onClientCoreLoaded = 'onClientCoreLoaded',
    onClientResourceStop = 'onClientResourceStop',
    onClientSoundBeat = 'onClientSoundBeat',
    onClientSoundChangedMeta = 'onClientSoundChangedMeta',
    onClientSoundFinishedDownload = 'onClientSoundFinishedDownload',
    onClientSoundStarted = 'onClientSoundStarted',
    onClientSoundStopped = 'onClientSoundStopped',
    onClientSoundStream = 'onClientSoundStream',
    onClientTrailerAttach = 'onClientTrailerAttach',
    onClientTrailerDetach = 'onClientTrailerDetach',
    onClientVehicleCollision = 'onClientVehicleCollision',
    onClientVehicleDamage = 'onClientVehicleDamage',
    onClientVehicleEnter = 'onClientVehicleEnter',
    onClientVehicleExit = 'onClientVehicleExit',
    onClientVehicleExplode = 'onClientVehicleExplode',
    onClientVehicleNitroStateChange = 'onClientVehicleNitroStateChange',
    onClientVehicleRespawn = 'onClientVehicleRespawn',
    onClientVehicleStartEnter = 'onClientVehicleStartEnter',
    onClientVehicleStartExit = 'onClientVehicleStartExit',
    onClientVehicleWeaponHit = 'onClientVehicleWeaponHit',
    onClientWeaponFire = 'onClientWeaponFire',
}

local events = {}
local workers = {}

---@param workerName string
---@param workerFunction function
---@param interval number
---@param repetitions number
---@return Timer
function createWorker(workerName, workerFunction, interval, repetitions)
    assert(type(workerName) == 'string', 'Worker name must be a string.')
    assert(type(workerFunction) == 'function', 'Worker function must be a function.')
    assert(type(interval) == 'number', 'Worker interval must be a number.')
    assert(type(repetitions) == 'number', 'Worker repetitions must be a number.')

    if workers[workerName] then
        return false, 'Worker already exists.'
    end

    local timer = setTimer(workerFunction, interval, repetitions)
    workers[workerName] = timer

    return timer
end

---@param workerName string
---@return void
function removeWorker(workerName)
    if not workers[workerName] then
        return false, 'Worker not found.'
    end

    return killTimer(workers[workerName])
end

---@param eventName string
---@param eventFunction function
---@return void
function createEvent(eventName, eventFunction, eventRoot)
    addEvent(eventName, true)
    addEventHandler(eventName, eventRoot or resourceRoot, eventFunction)

    events[eventName] = eventFunction
end

---@param eventName string
---@param sourceEvent any
---@param eventFunction function
---@return boolean, string
function createNativeEvent(eventName, sourceEvent, eventFunction)
    if isEventHandlerAdded(eventName, sourceEvent, eventFunction) then
        return false, 'Event handler already exists.'
    end

    return addEventHandler(eventName, sourceEvent, eventFunction)
end

---@param eventName string
---@param sourceEvent function
---@param eventFunction function
---@return void
function removeNativeEvent(eventName, sourceEvent, eventFunction)
    if not isEventHandlerAdded(eventName, sourceEvent, eventFunction) then
        return false, 'Event handler not found.'
    end

    return removeEventHandler(eventName, sourceEvent, eventFunction)
end

---@param eventName string
---@return void
function emitEvent(eventName, entity, ...)
    if events[eventName] then
        return triggerEvent(eventName, resourceRoot, ...)
    end

    return localPlayer and triggerServerEvent(eventName, resourceRoot, ...) or triggerClientEvent(entity, eventName, resourceRoot, ...)
end

function isEventHandlerAdded(sEventName, pElementAttachedTo, func)
    if type(sEventName) == 'string' and isElement(pElementAttachedTo) and type(func) == 'function' then
        local aAttachedFunctions = getEventHandlers(sEventName, pElementAttachedTo)
        if type(aAttachedFunctions) == 'table' and #aAttachedFunctions > 0 then
            for i, v in ipairs(aAttachedFunctions) do
                if v == func then
                    return true
                end
            end
        end
    end
    return false
end
